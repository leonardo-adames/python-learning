# Learning Python Level 1 - Seccion 12- Las Excepciones

## 12.1 Errores & Excepciones en python

### Introducción Al Manejo De exepciones

Las excepciones en Python son errores que ocurren durante la ejecución del programa, interrumpiendo su flujo normal,<br>
pero pueden ser gestionadas con bloques `try`...`except` para evitar que el programa se detenga, permitiendo manejar fallos como división por cero o archivos no encontrados,<br>
e incluso lanzar errores personalizados con raise para controlar condiciones específicas en tu código. 

## ¿Cómo se manejan? (`try`, `except`, `else`, `finally`)

**`try:`** El código que podría causar una excepción se coloca aquí.

**`except:`** Si ocurre una excepción en el try, el código en el except correspondiente se ejecuta. Puedes especificar el tipo de excepción (ej. except ZeroDivisionError:) o capturar varias.

**`else:`** Se ejecuta si no hay ninguna excepción en el bloque try.

**`finally:`** Se ejecuta siempre, haya o no haya excepción, útil para liberar recursos (como cerrar archivos).

```python
try:
    resultado = 10 / 0
except ZeroDivisionError:
    print("¡Error! No se puede dividir por cero.") # Captura el error específico
except Exception as e:
    print(f"Ocurrió otro error: {e}") # Captura cualquier otro error
else:
    print(f"La división fue exitosa: {resultado}") # No se ejecuta en este caso
finally:
    print("Este bloque siempre se ejecuta.")

```
---
## Lanzar excepciones (raise)

Puedes forzar que ocurra una excepción cuando se cumple una condición usando la palabra clave raise, seguida del tipo de excepción.<br>
Es útil para notificar errores que tú mismo detectas en tu lógica. 

```python
if edad < 18:
    raise ValueError("La edad debe ser mayor o igual a 18 para realizar esta acción.")
```
---
## Ejemplos comunes

**`ZeroDivisionError:`** Dividir por cero.

**`FileNotFoundError:`** Intentar abrir un archivo que no existe.

**`TypeError:`** Usar un tipo de dato incorrecto en una operación.

**`IndexError:`** Acceder a un índice fuera de rango en una lista. 

---
<br>
<br>

Hasta ahora, los mensajes de error se han mencionado poco, pero si has probado los ejemplos,<br>
probablemente hayas visto algunos. Hay (al menos) dos tipos de errores diferenciables: errores de sintaxis y excepciones .

### Errores de sintaxis 

Los errores de sintaxis, también conocidos como errores de análisis, son quizás el tipo de queja más común que recibes mientras todavía estás aprendiendo Python:

```python
while True print('Hello world')
  File "<stdin>", line 1
    while True print('Hello world')
               ^^^^^
SyntaxError: invalid syntax
```

El analizador repite la línea incorrecta y muestra pequeñas flechas `>>>` que señalan el lugar donde se detectó el error.<br>
Tenga en cuenta que este no siempre es el lugar que debe corregirse. En el ejemplo, el error se detecta en la función `print()`, ya que faltan dos puntos (`':'`) justo antes.

El nombre del archivo ( `<stdin>` en nuestro ejemplo) y el número de línea se imprimen para que sepa dónde buscar en caso de que la entrada provenga de un archivo.

### Excepciones 

Incluso si una declaración o expresión es sintácticamente correcta, puede causar un error al intentar ejecutarla. Los errores detectados durante la ejecución se denominan excepciones y no son necesariamente fatales: 
pronto aprenderá a gestionarlas en programas Python. Sin embargo, la mayoría de las excepciones no son gestionadas por los programas y generan mensajes de error como los que se muestran a continuación:

```python
10 * (1/0)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
    10 * (1/0)
          ~^~
ZeroDivisionError: division by zero
4 + spam*3
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
    4 + spam*3
        ^^^^
NameError: name 'spam' is not defined
'2' + 2
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
    '2' + 2
    ~~~~^~~
TypeError: can only concatenate str (not "int") to str
```
La última línea del mensaje de error indica lo ocurrido. Las excepciones son de diferentes tipos, y el tipo se imprime como parte del mensaje: los tipos en el ejemplo son ZeroDivisionError,
`NameError` y `TypeError`. La cadena impresa como tipo de excepción es el nombre de la excepción integrada que se produjo. Esto se aplica a todas las excepciones integradas,
pero no necesariamente a las excepciones definidas por el usuario (aunque es una convención útil). Los nombres de excepción estándar son identificadores integrados (no palabras clave reservadas).

El resto de la línea proporciona detalles según el tipo de excepción y su causa.

La parte anterior del mensaje de error muestra el contexto donde se produjo la excepción, en forma de un seguimiento de pila. Generalmente, contiene un seguimiento de pila que lista las líneas de origen; sin embargo, no muestra las líneas leídas desde la entrada estándar.

---

<br>
<br>

Es posible escribir programas que gestionen excepciones seleccionadas. Observe el siguiente ejemplo, que solicita al usuario una entrada hasta que se introduzca un entero válido, 
pero permite al usuario interrumpir el programa (usando Control- Co cualquier método compatible con el sistema operativo); 
tenga en cuenta que una interrupción generada por el usuario se indica lanzando la [KeyboardInterrupt](https://docs.python.org/3/library/exceptions.html#KeyboardInterrupt) excepción.

```python
while True:
    try:
        x = int(input("Please enter a number: "))
        break
    except ValueError:
        print("Oops!  That was no valid number.  Try again...")
```

La declaración `try` funciona de la siguiente manera:

Primero, se ejecuta la cláusula `try` (las declaraciones entre las palabras clave `try`y )`.except`

Si no ocurre ninguna excepción, se omite la cláusula excepttry y se finaliza la ejecución de la instrucción.

Si se produce una excepción durante la ejecución de la trycláusula, se omite el resto de la misma. 
Si su tipo coincide con la excepción nombrada tras la exceptpalabra clave, se ejecuta la cláusula `except` y la ejecución continúa después del bloque `try/except`.

Si ocurre una excepción que no coincide con la excepción nombrada en la cláusula `except` , se pasa a tryinstrucciones externas; 
si no se encuentra ningún controlador, es una excepción no controlada y la ejecución se detiene con un mensaje de error.

Una trysentencia puede tener más de una cláusula except para especificar controladores para diferentes excepciones. Se ejecutará como máximo un controlador. 
Los controladores solo gestionan las excepciones que ocurren en la cláusula `try` correspondiente , no en otros controladores de la misma trysentencia. 
Una cláusula `except` puede nombrar varias excepciones como una tupla entre paréntesis, por ejemplo:

```python
... except (RuntimeError, TypeError, NameError):
...     pass
```
---
Una clase en una exceptcláusula coincide con las excepciones que son instancias de la propia clase o de una de sus clases derivadas (pero no al revés: 
una cláusula except que enumera una clase derivada no coincide con las instancias de sus clases base). Por ejemplo, el siguiente código imprimirá `B, C, D` en ese orden:

```python
class B(Exception):
    pass

class C(B):
    pass

class D(C):
    pass

for cls in [B, C, D]:
    try:
        raise cls()
    except D:
        print("D")
    except C:
        print("C")
    except B:
        print("B")
```

Tenga en cuenta que si las cláusulas except se invirtieran (con first), se habría impreso `B, B, B` — se activa la primera cláusula `except` coincidente `.except B`

Cuando se produce una excepción, puede tener valores asociados, también conocidos como argumentos de la excepción . La presencia y los tipos de argumentos dependen del tipo de excepción.

La cláusula except puede especificar una variable después del nombre de la excepción. Esta variable está vinculada a la instancia de la excepción, 
que normalmente tiene un args atributo que almacena los argumentos. Para mayor comodidad, 
los tipos de excepción predefinidos definen` __str__()` la impresión de todos los argumentos sin acceder explícitamente a `.args`.

```python
try:
    raise Exception('spam', 'eggs')
except Exception as inst:
    print(type(inst))    # the exception type
    print(inst.args)     # arguments stored in .args
    print(inst)          # __str__ allows args to be printed directly,
                         # but may be overridden in exception subclasses
    x, y = inst.args     # unpack args
    print('x =', x)
    print('y =', y)
```