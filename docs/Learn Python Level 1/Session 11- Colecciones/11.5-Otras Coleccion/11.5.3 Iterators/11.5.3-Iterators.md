# Learning Python Level 1 - Sesión 11 Colecciónes

## 11.6 - Iterators

### Cómo usar Iterators en Python

Un `iterador` es un objeto que contiene un número contable de valores sobre el que se puede iterar, lo que significa que se pueden recorrer todos los valores. Técnicamente, en Python, un `iterador` es un objeto que implementa el protocolo de iterador, que consta de los métodos `iter()` y `next()`.

Por otro lado, el `Iterable` es cualquier objeto que dispone de un `Iterador`.

Entre los iterables predefinidos se incluyen `listas`, `tuplas`, `cadenas de texto`, `conjuntos`.

```python
# Ejemplos de iterables
lista = [1, 2, 3, 4, 5]
cadena = "Python"
tupla = (1, 2, 3)
conjunto = {1, 2, 3}
```
Aunque nosotros podemos crear nuestros propios iterables (como veremos más abajo).

<br>

### Uso de iterables

Un `iterable` es cualquier objeto que puede ser recorrido en un bucle for. Por ejemplo, se muestra cómo utilizar un iterable directamente en un bucle for.

```python
# Ejemplo de uso de un iterable en un bucle for
lista = [1, 2, 3, 4, 5]

for elemento in lista:
    print(elemento)

# Salida: 1, 2, 3, 4, 5
```
Internamente, cuando usamos `for` para recorrer un objeto `Iterable`, estamos usando su `iterador` para obtener los distintos elementos.
<br>

### ¿Qué es un Iterador?

Un Iterador es un elemento que apunta a un elemento, generalmente perteneciente a una colección

Técnicamente un iterador es simplemente un objeto que implementa los métodos __iter__() y __next__().

El método __iter__() devuelve el propio objeto iterador
El método __next__() devuelve el siguiente elemento en la secuencia
Cuando no hay más elementos que devolver, __next__() lanza una excepción StopIteration.

```python
s = 'abc'
it = iter(s)
it

next(it)
#'a'
next(it)
#'b'

next(it)
#'c'

next(it)
#Traceback (most recent call last):
#  File "<stdin>", line 1, in <module>
#StopIteration
```
---
### **Creación de un iterador**

**Pasos para Crear un Iterador Personalizado**

- **Definir la Clase:** Crear la clase que actuará como iterador.

- **Método __init__():** Inicializar los atributos necesarios (por ejemplo, los datos a iterar y el estado actual).

- **Método __iter__():** Debe devolver el objeto iterador en sí, generalmente usando return `self`.

- **Método __next__():** Contiene la lógica para devolver el siguiente elemento. Debe lanzar la excepción StopIteration cuando no queden más elementos por recorrer.

Vamos a ver cómo podemos crear un iterador personalizado en Python.. Para crear un iterador personalizado, necesitamos definir una clase que implemente los métodos `__iter__()` y `__next__()`.

```python
# Ejemplo de creación de un iterador personalizado
class Contador:
    def __init__(self, inicio, fin):
        self.inicio = inicio
        self.fin = fin

    def __iter__(self):
        self.numero = self.inicio
        return self

    def __next__(self):
        if self.numero <= self.fin:
            resultado = self.numero
            self.numero += 1
            return resultado
        else:
            raise StopIteration

# Uso del iterador personalizado
contador = Contador(1, 5)
iterador = iter(contador)

for numero in iterador:
    print(numero)

# Salida: 1, 2, 3, 4, 5
```
---

## Ejemplos prácticos

### Creando un iterador desde un iterable

Aquí se muestra cómo crear un iterador a partir de un iterable utilizando la función `iter()`. Luego, se utilizan llamadas a `next()` para obtener los elementos del iterador uno a uno.

```python
# Ejemplo de creación de un iterador desde un iterable
lista = [1, 2, 3, 4, 5]

# Crear un iterador a partir de un iterable
iterador = iter(lista)

print(next(iterador))  # Salida: 1
print(next(iterador))  # Salida: 2
print(next(iterador))  # Salida: 3
print(next(iterador))  # Salida: 4
print(next(iterador))  # Salida: 5
print(next(iterador))  # Stop iteration
```
---

### Usando iteradores en funciones y métodos

Este ejemplo muestra cómo utilizar iteradores dentro de una función. En este caso, imprime cada elemento de un iterable.

```python
# Usar iteradores en funciones y métodos
def recorrer(iterable):
    iterator = iter(iterable)
    while True:
        try:
            elemento = next(iterator)
            print(elemento)
        except StopIteration:
            break

# Ejemplo de uso
cadena = "Python"
recorrer(cadena)

# Salida: p, y, t, h, o, n
```

## Conceptos Clave

- **Iterable:** Objeto que puede devolver un iterador (listas, tuplas, etc.) usando `iter()`.

- **Iterador:** Objeto que recuerda su posición y permite el recorrido secuencial usando `next()`.

- **StopIteration:** Excepción necesaria para detener los ciclos `for` o `next()`.

<br>

## AUN NO HEMOS LLEGADO A LA PARTE DEL CURSO DONDE VEREMOS LAS `CLASES` DENTRO DE LA PROGRAMACIÓN ORIENTADA A OBJETOS(`POO`), POR LO TANTO SOLO TRABAJAREMOS CON LOS ITERADORES DESDE OBJETOS ITERABLES DIRECTAMENTE POR EL MOMENTO.