# Learning Python Level 1 - Sesi칩n 11 Colecci칩nes

## 11.5.2 - Comprensi칩n

### C칩mo usar comprensiones en Python Introducci칩n

En Python, la comprensi칩n (o comprehension en ingl칠s) se refiere a una sintaxis concisa para crear nuevas secuencias a partir de iterables existentes.

Pueden aplicarse a cualquier iterable, lo que incluye listas, conjuntos y diccionarios, entre otros. Pero tambi칠n funcionar치 su creamos nuestros propios iterables.

>- Las comprensiones no solo son m치s concisas en sintaxis si no que, en ocasiones, tambi칠n pueden ser m치s r치pidas que las construcciones equivalentes usando bucles for.

La sintaxis b치sica:

```python
expresion for elemento in iterable
```

Opcionalmente, podemos pasar una condici칩n de filtro as칤

```python
expresion for elemento in iterable if condicion
```
>- expresion: Es la parte que define el resultado de la comprension. Es una operaci칩n que genera el elemento final a partir del original.
>- for elemento in iterable: Este es el bucle que itera sobre cada elemento del iterable original
>- if condicion: Esta es una condici칩n opcional que filtra los elementos del iterable original, antes de aplicarles la expresion.

Esta sintaxis tiene variaciones m칤nimas en funci칩n del objeto que queramos general con la compresi칩n (ggneralmente variar치 en si envolveremos entre `[]` o `{}`)

Pero mejor, vamos a verlo con unos ejemplos 游녢

### Comprensiones de listas

Las comprensiones de listas permiten crear nuevas listas aplicando una expresi칩n a cada elemento de una secuencia. La sintaxis b치sica es:

```python
[expresion for elemento in iterable if condicion]
```

Por ejemplo, podemos aplicarlo sin condici칩n

```python
# Crear una lista de cuadrados de n칰meros del 0 al 9
cuadrados = [x**2 for x in range(10)]

print(cuadrados)  # Salida: [0, 1, 4, 9, 16, 25, 36, 49, 64, 81]
```
O en este ejemplo con una condici칩n,

```python
# Crear una lista de cuadrados de los numeros 0 al 9 que son pares
cuadrados_pares = [x**2 for x in range(10) if x % 2 == 0]

print(cuadrados_pares)  # Salida: [0, 4, 16, 36, 64]
```
---
**Comprensiones anidadas**<br>
Las comprensiones de listas tambi칠n pueden ser anidadas, lo que es 칰til para trabajar con estructuras multidimensionales.

```python
# Crear una matriz identidad de 3x3
matriz_identidad = [[1 if i == j else 0 for j in range(3)] for i in range(3)]

print(matriz_identidad)
# Salida: [[1, 0, 0], [0, 1, 0], [0, 0, 1]]
```
>En este ejemplo,<br>
> - El `[[...] for i in range(3)]` exterior, genera 3 compresiones de lista
> - El `[1 if i == j else 0 for j in range(3)]` interior genera una lista que tiene 3 elementos, que son `1` si `i==j`.

### Comprensiones de conjuntos
Las comprensiones de conjuntos son similares a las de listas, pero generan un set. La sintaxis es:

```python
{expresi칩n for elemento in iterable if condici칩n}
```
Por ejemplo,

```python
# Crear un conjunto de n칰meros impares del 0 al 
impares = {x for x in range(10) if x % 2 != 0}

print(impares)  # Salida: {1, 3, 5, 7, 9}
```

### Comprensiones de diccionarios

Tambi칠n podemos usar compresiones que nos permiten construir diccionarios de manera concisa. La sintaxis es:

```python
{clave: valor for elemento in iterable if condici칩n}
```
Por ejemplo, sin condici칩n,

```python
# Crear un diccionario con n칰meros y sus cuadrados para n칰meros del 0 al 9
cuadrados_dict = {x: x**2 for x in range(10)}

print(cuadrados_dict)
# Salida: {0: 0, 1: 1, 2: 4, 3: 9, 4: 16, 5: 25, 6: 36, 7: 49, 8: 64, 9: 81}
```

O con una condici칩n,

```python
# Crear un diccionario de cuadrados solo para n칰meros pares del 0 al 9
cuadrados_pares_dict = {x: x**2 for x in range(10) if x % 2 == 0}

print(cuadrados_pares_dict)
# Salida: {0: 0, 2: 4, 4: 16, 6: 36, 8: 64}
```

### Comprensiones de generadores

Los generadores retornan un objeto que produce elementos. La sintaxis es:

```python
(expresion for elemento in iterable if condicion)
```
Por ejemplo,

```python
# Crear un generador de cuadrados de n칰meros del 0 al 9
cuadrados_gen = (x**2 for x in range(10))

print(list(cuadrados_gen))  # Salida: [0, 1, 4, 9, 16, 25, 36, 49, 64, 81]
```

Puede parecer similar al caso de una lista, pero en este caso lo que tenemos es un **iterable de generadores**.

Esto ser칤a 칰til si trabajamos con grande vol칰menes de datos, que no necesitamos generar y cargar en memoria a la vez.

Es decir, en el ejemplo de la lista, `cuadrados` ten칤a calculados todos los valores. Embargo en el caso de `cuadrados_gen` se calcula una 칰nica vez cada vez que iteramos sobre la colecci칩n.

En el ejemplo parece similares, porque `print(list())` recorre todos los elementos y los imprime.
